<?xml version="1.0" encoding="UTF-8"?>
<highlightDefinition version="1.1">
	<name>Wren</name>

	<blockStartMarker indent="1">\{\s*(?:$|//|/\*|\\)|\s*/\*\s*$</blockStartMarker>
	<blockEndMarker>^\s*\}|^\s*\*/</blockEndMarker>	

	<contexts caseSensitive="yes">
		<highlightContext name="wrenString" fallback="string">
			<!-- Grab everything between double quotes on a line -->
			<entryRegEx>"[^\r\n]*"</entryRegEx>
		
			<!-- Escape sequences within strings -->
			<highlightContext name="wrenEscape" fallback="escape">
				<entryRegEx>\\(?:[0\\"%abeefnrtv]|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})</entryRegEx>
			</highlightContext>
		
			<!-- String interpolation -->
			<highlightContext name="wrenStringInterpolation" fallback="string" extension="wren">
				<entryRegEx>%\(.+\)</entryRegEx>
			</highlightContext>
		</highlightContext>
		
		<!-- Raw strings (triple quoted) -->
		<highlightContext name="wrenRawString" fallback="string">
			<startRegEx>"""</startRegEx>
			<endRegEx>"""</endRegEx>
		</highlightContext>
	
		<highlightContext name="wrenKeyword" fallback="keyword">
			<keywords>
				<string>as</string>
				<string>break</string>
				<string>class</string>
				<string>construct</string>
				<string>continue</string>
				<string>else</string>
				<string>false</string>
				<string>for</string>
				<string>foreign</string>
				<string>if</string>
				<string>import</string>
				<string>in</string>
				<string>is</string>
				<string>null</string>
				<string>return</string>
				<string>static</string>
				<string>super</string>
				<string>this</string>
				<string>true</string>
				<string>var</string>
				<string>while</string>
			</keywords>
		</highlightContext>
		
		<highlightContext name="wrenComment" fallback="comment">
			<startRegEx>//</startRegEx>
			<endRegEx>[\n\r]</endRegEx>
		</highlightContext>
		
		<highlightContext name="wrenMultiLineComment" fallback="comment">
			<startRegEx>/\*</startRegEx>
			<endRegEx>\*/</endRegEx>
		</highlightContext>
		
		<!-- Field identifiers (starting with underscore) -->
		<highlightContext name="wrenField" fallback="identifier">
			<entryRegEx>_[A-Za-z_][A-Za-z0-9_]*</entryRegEx>
		</highlightContext>
		
		<!-- Regular lowercase identifier -->
		<highlightContext name="lowercaseIdentifier" fallback="identifier">
			<entryRegEx>[a-z][A-Za-z0-9_]*</entryRegEx>
		</highlightContext>
		
		<!-- Regular uppercase identifier -->
		<highlightContext name="uppercaseIdentifier" fallback="identifier">
			<entryRegEx>[A-Z][A-Za-z0-9_]*</entryRegEx>
		</highlightContext>
		
		<highlightContext name="wrenNumber" fallback="number">
			<entryRegEx>-?(?:0x[0-9a-f]+|[0-9]+(?:\.[0-9]+)?(?:e[+-]?[0-9]+)?)</entryRegEx>
		</highlightContext>
	</contexts>
</highlightDefinition>